---
title: –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 5
tags:
  - os
  - lab
---
## –ó–∞–¥–∞–Ω–∏–µ
1.  –ê—Å—Å–µ–º–±–ª–µ—Ä
	- –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö `RSI` –∏ `RDX`. 
	- —Å–ª–æ–∂–∏—Ç—å –¥–≤–∞ —á–∏—Å–ª–∞ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö `RSI` –∏ `RDX`, –ø–æ–º–µ—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ä–µ–≥–∏—Å—Ç—Ä `RSI`.
	- –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ `RSI` –¥–∞–Ω–æ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ - –≥—Ä–∞–¥—É—Å—ã –ø–æ —à–∫–∞–ª–µ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞. –ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∏—Ç –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ `RSI` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —à–∫–∞–ª–µ –¶–µ–ª—å—Å–∏—è. –§–æ—Ä–º—É–ª–∞ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞: $$T_C=\frac{5(T_{Ft}-32)}{9}$$–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —á—Ç–æ –≤—Ö–æ–¥–Ω–æ–µ —á–∏—Å–ª–æ –∏ –æ—Ç–≤–µ—Ç –±—É–¥—É—Ç –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã–º–∏ —á–∏—Å–ª–∞–º–∏, —Ç.–µ. $$T_{Ft} \in [32, 220]$$
	- –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö `RSI` –∏ `RDX` –¥–∞–Ω—ã 2 —á–∏—Å–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—è –¥—Ä—É–≥–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

> [!warning] 
> –î–ª—è –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π: 
> - –†–∞–∑—Ä–µ—à–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏: `RAX`, `RBX`, `RDX`, `RBP`, `RDI`, `RSI`, `R8-R15`.
> - –ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Ç–µ–∫–æ–º, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ.
2. –ê—Å—Å–µ–º–±–ª–µ—Ä II
	- –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `swap`, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é 2 —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ 64-–±–∏—Ç–Ω—ã—Ö —á–∏—Å–ª–∞ (`RDI`, `RSI`) –∏ –æ–±–º–µ–Ω–∏–≤–∞—é—â–∞—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç–∏
	- –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `min`, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é 2 –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–ª–∞ (`RDI`, `RSI`) –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –º–∏–Ω–∏–º—É–º –∏–∑ –¥–≤—É—Ö —á–∏—Å–µ–ª –≤ —Ä–µ–≥–∏—Å—Ç—Ä `RAX`
	- –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `pow`, –ø—Ä–∏–Ω–∏–º–∞—é—â—É—é –Ω–∞ –≤—Ö–æ–¥ 2 –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–ª–∞ `x` –∏ `p` (`RDI`, `RSI`) –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è `x^p` –≤ —Ä–µ–≥–∏—Å—Ç—Ä `RAX`. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ `x` –∏ `p` –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–≤–Ω—ã 0 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –æ—Ç–≤–µ—Ç –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ 64 –±–∏—Ç–∞. 
3. üí´ –î–æ–ø. –∑–∞–¥–∞–Ω–∏–µ –ø–æ –û–° Linux
	- üí´ —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É `developer` –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤—Ö–æ–¥—è—â–∏—Ö –≤ –Ω–µ—ë. –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –æ–¥–Ω–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Ñ–∞–π–ª—ã –º–æ–≥–ª–∏ –∏–∑–º–µ–Ω—è—Ç—å –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã
	- üí´ —Å–æ–∑–¥–∞—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –æ–±–º–µ–Ω–∞ —Ñ–∞–π–ª–∞–º–∏, –Ω–æ —á—Ç–æ–±—ã —É–¥–∞–ª—è—Ç—å —Ñ–∞–π–ª—ã –º–æ–≥–ª–∏ —Ç–æ–ª—å–∫–æ –∏—Ö —Å–æ–∑–¥–∞—Ç–µ–ª–∏
	- üí´ —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤. –°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —Ç–æ–ª—å–∫–æ –∑–Ω–∞—è –∏–º—è —Ñ–∞–π–ª–∞, –∞ —á–µ—Ä–µ–∑ `ls` —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –±—ã–ª–æ –Ω–µ–ª—å–∑—è

## –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
##### –ö–æ–º–ø–∏–ª—è—Ü–∏—è/–ª–∏–Ω–∫–æ–≤–∫–∞
```sh
touch lab5.asm
nasm -felf64 lab5.asm -o lab5.o && ld -o lab5 lab5.o    
chmod +x ./lab5
./lab5
```

##### –ê—Å—Å–µ–º–±–ª–µ—Ä
###### –û–±–º–µ–Ω –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö `rsi` –∏ `rdx`
```assembly
xchg rsi, rdx
```

###### –°–ª–æ–∂–µ–Ω–∏–µ –¥–≤—É—Ö —á–∏—Å–µ–ª –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö `rsi` –∏ `rdx`
```assembly
add rsi, rdx
```

###### –ü–µ—Ä–µ–≤–æ–¥ –≥—Ä–∞–¥—É—Å–æ–≤ –ø–æ —à–∫–∞–ª–µ –§–∞—Ä–µ–Ω–≥–µ–π—Ç–∞ –≤ –≥—Ä–∞–¥—É—Å—ã –ø–æ —à–∫–∞–ª–µ –¶–µ–ª—å—Å–∏—è
```assembly
mov rax, rsi
sub rax, 32
imul rax, 5
mov rdx, 9
idiv rdx
mov rsi, rax
```

##### –ê—Å—Å–µ–º–±–ª–µ—Ä II
###### `swap` –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—è–º `rdi` –∏ `rsi`
```assembly
swap:
    mov rax, [rdi]
    mov rdx, [rsi]
    mov [rdi], rdx
    mov [rsi], rax
    ret
```

###### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏–∑ –¥–≤—É—Ö —á–∏—Å–µ–ª –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö `rdi` –∏ `rsi`
```assembly
min:
    cmp rdi, rsi
    jae .return_rdi
    mov rax, rsi
    ret
.return_rdi:
    mov rax, rdi
    ret
```

###### –í–æ–∑–≤–µ–¥–µ–Ω–∏–µ `x` –≤ —Å—Ç–µ–ø–µ–Ω—å `p`
```assembly
pow:
    mov rax, 1
    cmp rsi, 0
    je .return
.loop:
    imul rax, rdi
    dec rsi
    jnz .loop
.return:
    ret
```

##### –î–æ–ø. –∑–∞–¥–∞–Ω–∏–µ –ø–æ Linux
```sh
# –ì—Ä—É–ø–ø–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
sudo groupadd developer
sudo useradd -g developer user1
sudo useradd -g developer user2
sudo useradd -g developer user3

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
cd /tmp
mkdir ./shared
sudo chown :developer ./shared
sudo chmod g+w ./shared

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –æ–±–º–µ–Ω–∞ —Ñ–∞–π–ª–∞–º–∏
sudo mkdir ./shared/share
sudo chown :developer ./shared/share
sudo chmod g+w ./shared/share
sudo setfacl -d -m u::rw,g::rw,o::- ./shared/share

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
mkdir ./restricted
sudo chmod 711 ./restricted
sudo setfacl -d -m u::r,g::-x,o::-x ./restricted
ls -a ./restricted
```